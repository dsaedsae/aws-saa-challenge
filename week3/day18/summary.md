# Day 18 학습 요약: 서버리스의 관문, API Gateway와 Lambda 연동

## ① API Gateway의 역할

API Gateway는 서버리스 아키텍처에서 **'정문(Front Door)'** 역할을 합니다. 외부 클라이언트(웹, 모바일 앱 등)로부터 들어오는 모든 API 요청을 가장 먼저 받아 처리하는 통합된 진입점입니다.

단순히 요청을 전달하는 것을 넘어, 트래픽 관리, API 버전 관리, 모니터링, 그리고 가장 중요하게는 **인증 및 권한 부여(Authorization)**와 같은 복잡한 작업을 대신 처리해 줍니다. 이를 통해 개발자는 백엔드(Lambda, EC2 등)의 비즈니스 로직에만 집중할 수 있도록 도와주는 강력한 관리형 서비스입니다.

---

## ② API 엔드포인트 유형

API Gateway는 세 가지 엔드포인트 유형을 제공하며, 사용자의 위치와 네트워크 환경에 따라 선택합니다.

-   **엣지 최적화 (Edge-Optimized):** 전 세계에 분산된 CloudFront 엣지 로케이션을 통해 API 요청을 처리합니다. 지리적으로 다양한 곳에 있는 **글로벌 사용자**들에게 가장 낮은 지연 시간을 제공하는 데 적합합니다.
-   **리전 (Regional):** API Gateway가 배포된 **특정 AWS 리전 내**에서만 요청을 처리합니다. 애플리케이션 사용자들이 주로 같은 리전 내에 있을 때 더 빠르고 비용 효율적입니다.
-   **프라이빗 (Private):** **VPC 내부**에서만 접근할 수 있는 API를 만듭니다. VPC 엔드포인트를 통해 내부 서비스 간의 안전한 통신을 위해 사용됩니다.

---

## ③ Lambda 프록시 통합

Lambda 프록시 통합은 API Gateway와 Lambda를 연결하는 가장 간단하고 권장되는 방식입니다.

-   **Lambda 프록시 통합:** 클라이언트의 HTTP 요청(헤더, 본문, 경로 등) 전체를 **하나의 JSON 이벤트 객체로 포장하여 그대로 Lambda 함수에 전달**합니다. Lambda 함수는 이 정보를 바탕으로 비즈니스 로직을 처리하고, 정해진 JSON 형식(`statusCode`, `body` 등 포함)으로 응답을 반환하기만 하면 됩니다.
-   **사용자 지정 통합 (Non-proxy):** 반면, 이 방식을 사용하지 않으면 API Gateway에서 요청의 어떤 부분을 Lambda의 어떤 파라미터에 매핑하고, Lambda의 응답을 어떻게 HTTP 응답으로 변환할지 **모든 규칙을 수동으로 설정**해야 합니다.

결론적으로, 프록시 통합은 복잡한 매핑 과정을 생략하게 해주어 개발자가 **Lambda 코드 내에서 모든 것을 유연하게 제어**할 수 있도록 해주는 장점이 있습니다.

---

## ④ 느낀 점

오늘은 API Gateway와 Lambda를 연동하여 완전한 서버리스 API를 구축하는 방법을 배웠다. EC2 없이 오직 요청이 있을 때만 코드가 실행되는 구조는 비용과 운영 효율성 측면에서 왜 서버리스가 현대적인 아키텍처의 대세인지 명확히 보여주었다.

특히 이번 'Troubleshooting' 실습은 매우 유익했다. 정상적인 시스템을 만드는 것보다, 이미 망가진 시스템의 '500 Internal Server Error' 원인을 찾아 해결하는 과정이 더 기억에 남는다. IAM 권한, Lambda 코드, API Gateway 설정을 하나하나 되짚어보며 각 구성 요소가 어떻게 유기적으로 연결되어 있는지, 그리고 그 연결고리 중 하나만 잘못되어도 전체 시스템이 어떻게 실패하는지 직접 확인할 수 있었다. 문제 해결 과정을 통해 서버리스 아키텍처에 대한 이해도가 훨씬 깊어진 것 같다.