# Day 6 학습 요약: S3 심층 분석 및 VPC 엔드포인트

## ① VPC 엔드포인트의 이점

VPC 엔드포인트를 사용하면 NAT 게이트웨이 방식에 비해 다음과 같은 명확한 이점이 있다.

-   **보안적 이점:** 트래픽이 AWS 내부망을 통해서만 S3와 통신하므로, 공용 인터넷에 노출되지 않는다. 이는 데이터 유출이나 외부 공격의 위험을 원천적으로 차단하여 매우 높은 수준의 보안을 제공한다.
-   **비용적 이점:** NAT 게이트웨이는 시간당 요금과 데이터 처리 요금이 발생하지만, 동일 리전 내의 게이트웨이형 VPC 엔드포인트는 자체 비용이 없고 데이터 전송 비용도 발생하지 않는다. 따라서 트래픽이 많은 환경에서는 상당한 비용을 절감할 수 있다.

## ② 버전 관리 vs 스냅샷

S3의 '버전 관리'와 EBS의 '스냅샷'은 데이터를 보호하는 기능이지만, 대상과 방식에서 근본적인 차이가 있다.

-   **S3 버전 관리:** **객체(파일) 단위**로 동작한다. 특정 파일 하나가 실수로 삭제되거나 덮어쓰기 되었을 때, 해당 파일의 이전 버전으로 손쉽게 복원할 수 있다. 매우 세분화된 복구 방식이다.
-   **EBS 스냅샷:** **볼륨(디스크) 전체**를 특정 시점으로 복제하는 방식이다. OS, 애플리케이션, 모든 데이터를 포함한 서버의 상태 전체를 특정 시점으로 되돌리거나, 동일한 상태의 서버를 복제할 때 사용된다.

## ③ 수명 주기 규칙과 미리 서명된 URL의 사용 사례

-   **수명 주기 규칙:** **로그 데이터 아카이빙**에 매우 유용하다. 예를 들어, 웹 서버 로그를 첫 30일간은 S3 Standard에 저장하여 자주 분석하고, 이후 규제 준수를 위해 S3 Glacier Deep Archive로 자동 이동시켜 저렴하게 7년간 보관하도록 설정할 수 있다.
-   **미리 서명된 URL:** **회원제 동영상 강의 사이트**를 예로 들 수 있다. 모든 강의 영상은 비공개(Private)로 버킷에 저장하되, 수강료를 지불한 회원에게만 1시간 동안 유효한 임시 접속 URL을 생성하여 제공함으로써 콘텐츠를 안전하게 보호할 수 있다.

## ④ 느낀 점

오늘은 AWS의 서비스들이 얼마나 유기적으로 연결되어 있는지 체감할 수 있었다. S3는 단순한 파일 저장소가 아니라, VPC 엔드포인트와 결합하여 보안을 강화하고, 수명 주기 규칙으로 비용까지 최적화할 수 있는 다층적인 서비스라는 것을 깨달았다. 특히 버킷 정책과 IAM 정책을 모두 고려해야 권한이 제대로 동작한다는 점을 통해, AWS 보안은 여러 계층을 겹겹이 쌓아 올리는 '심층 방어(Defense in Depth)' 개념이 기본이라는 것을 다시 한번 느꼈다. CLI를 통해 보안 링크를 생성하는 경험은 매우 흥미로웠다.

## '미리 서명된 URL' 생성 방법 (CLI)
미리 서명된 URL은 AWS CLI의 aws s3 presign 명령어를 사용하여 간단하게 생성할 수 있습니다. 이 기능은 원래 비공개(Private)인 S3 객체에 대해, 제한된 시간 동안만 유효한 임시 접근 링크를 만들어줍니다.

1. 기본 명령어
Bash

aws s3 presign s3://[버킷이름]/[객체키] --expires-in [초단위]
[버킷이름]: 대상 파일이 있는 S3 버킷의 이름

[객체키]: 대상 파일의 이름 (경로 포함)

--expires-in: 링크가 유효할 시간을 초 단위로 지정 (예: 600초 = 10분)
URL 안에는 이 링크를 생성한 IAM 사용자의 자격 증명으로 서명된 임시 인증 정보가 포함되어 있습니다. 그래서 별도의 로그인 없이도 특정 객체에 대한 특정 작업(기본값: GetObject)을 제한된 시간 동안 허용해 주는 원리입니다.